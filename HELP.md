# Documentation

## Getting started

### Running
To start the program, go to the latest release of the project on GitHub (https://github.com/ZackMurry/zmdb/releases),
download it, and run it.

### Sending requests
Use an HTTP request sender (like Postman) or send HTTP requests programmatically to send requests to localhost:9001 (by default).

## Layout
The highest level of container is a database. Each database can contain tables.
Each table can contain columns, which combined with other columns, contains rows.

## Tools
A useful tool for debugging is the log.txt file. This will contain all of the errors and some events to tell you what's happening.  
The file clears itself on restart. This might not be available through the .jar version.

## Commands

### Add database

##### POST request to /databases
Takes a request body, which is always a JSON object.  
The JSON object will have a "name" attribute, which is a string.

Returns 1 for successful and 0 for unsuccessful.

Example:  
POST localhost:9001/databases  
{  
    "name": "myDatabase"  
}  

### Add table

##### POST request to /databases/{databaseName}/tables
Takes a JSON object with an attribute called "name", which is a string.

Returns 1 for successful and 0 for unsuccessful.

Example:  
POST localhost:9001/databases/myDatabase/tables  
{  
    "name": "myTable"  
}

### Add column
#### POST request to /databases/{databaseName}/tables/{myTable}/columns
Takes a JSON object with two String attributes called "name" and "type" (see types).

Returns 1 for successful and 0 for unsuccessful.

Example:   
POST localhost:9001/databases/myDatabase/tables/myTables/columns  
{  
    "name": "myColumn",  
    "type": "String"  
}

Response:
1

### Get all databases

#### GET request to /databases
Does not take a JSON object.

Returns a JSON object which contains details about all the databases.

Example:  
GET localhost:9001/databases  

Response:  
[  
    {  
        "name": "myDatabase",  
        "tables": [  
            ...  
        ],  
        "tableCount": 1  
    }  
]

### Add row to table

#### POST request to /databases/{databaseName}/tables
Takes a JSON object with two values, a list called "data", which contains the information you want to add,
and a list called "order", which contains the the column to add each value from the respective index in 'data' to.

Returns 1 for successful, 0 for unsuccessful.

Example:  
POST localhost:9001/databases/myDatabase/tables/myTable  
{  
   "data": ["myRowColumn"],  
   "order": ["myColumn"]  
}

Response:
1


### Get number of databases

#### GET request to /databases/count
Doesn't take any body.

Returns number of databases.

Example:  
GET localhost:9001/databases/count

Response:
1


### Get database by name

#### GET request to /databases/{name}
Doesn't take a body.

Returns a database.

Example:  
GET localhost:9001/databases/myDatabase

Response:  
{  
    "name": "myDatabase",  
    "tables": [  
        ...  
    ],  
    "tableCount": 1  
}

### Get table by name

#### GET request to /databases/{databaseName}/tables/{tableName}
Doesn't take a body.

Returns a table.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable

Response:  
{  
    "name": "myTable",  
    "databaseName": "myDatabase",  
    "indexOfIndexColumn": 0,  
    "columnNames": [  
        "myColumn"  
    ],  
    "numberOfColumns": 1,  
    "indexColumnName": "myColumn",  
    "allColumns": [  
        ...  
    ]  
}

### Get column by name

#### GET request to /databases/{databaseName}/tables/{tableName}/columns/{columnName}
Doesn't take a body.

Returns a column.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable/columns/myColumn

Response:  
{  
    "name": "myColumn",  
    "databaseName": "myDatabase",  
    "tableName": "myTable",  
    "autogenerated": false,  
    "numberOfRows": 1,  
    "allRows": [  
        "myRowColumn"  
    ]  
}

### Get number of tables in a database

#### GET request to /databases/{databaseName}/tables/count
Doesn't take a body.

Returns number of tables in a specific database.

Example:  
GET localhost:9001/databases/myDatabase/count

Response:
1

### Get tables from a database

#### GET request to /databases/{databaseName}/tables
Doesn't take a body.

Returns a list of tables in the database.

Example:  
GET localhost:9001/databases/myDatabase/tables

Response:  
[  
    {  
        "name": "myTable",  
        "databaseName": "myDatabase",  
        "indexOfIndexColumn": 0,  
        "columnNames": [  
            "myColumn"  
        ],  
        "numberOfColumns": 1,  
        "indexColumnName": "myColumn",  
        "allColumns": [  
            ...  
        ]  
    }  
]


### See if a table contains a specific row

#### GET request to /databases/{databaseName/tables/{tableName}/contains
Takes a JSON object with two values, the first being a list, called "data" with the data that you want to check if the table contains and the second being a list, called "order",
with the order of the columns that you entered the data in.

Returns a boolean value.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable/contains  
{  
    "data": ["myRowColumn"],  
    "order": ["myColumn"]  
}

Response:  
true


### Delete a database

### DELETE request to /databases/{databaseName}
Does not take a body.

Returns 1 for successful and 0 for unsuccessful

Example:  
DELETE localhost:9001/databases/myDatabase

Response:  
1

### Delete a table

### DELETE request to /databases/{databaseName}/tables/{tableName}
Does not take a body.

Returns 1 for successful and 0 for unsuccessful

Example:  
DELETE localhost:9001/databases/myDatabase/tables/myTable

Response:  
1


### Delete a column

### DELETE request to /databases/{databaseName}/tables/{tableName}/columns/{columnName}
Does not take a body.

Returns 1 for successful and 0 for unsuccessful

Example:  
DELETE localhost:9001/databases/myDatabase/tables/myTable

Response:  
1


### Delete a row

#### DELETE request to /databases/{databaseName}/tables/{tableName}/rows
Takes a JSON object with two fields, the first being a list called "data", which contains the data for the row you want to delete, and the second
being a list called "order", which contains the order of the columns that you entered the data in.

Returns 1 for successful and 0 for unsuccessful

Example:  
DELETE localhost:9001/databases/myDatabase/tables/myTable/rows  
{  
    "data": ["myRowColumn", "myRow2"],  
    "order": ["myColumn", "mySecondColumn"]  
}

Response:  
1

#### DELETE request to /databases/{databaseName}/tables/{tableName}/rows/{index}
Does not take a request body. The index is the index of the row that you want to delete, which can be found using GET requests.

Returns 1 for successful and 0 for unsuccessful

Example:  
DELETE localhost:9001/databases/myDatabase/tables/myTable/rows/0

Response:  
1


### Get index column
The index column of a table is a column with unique rows, which can act as an ID. You can also disable having index columns altogether, but they're on by default.
This is like primary keys from other SQL databases.

#### GET request to /databases/{databaseName}/tables/{tableName}/index
Does not take a request body.

Returns the name of the index column, or OFF if index columns are disabled for that table.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable/index

Response:  
myColumn


### Set index column

#### PUT request to /databases/{databaseName}/tables/{tableName}/index
Takes a JSON object that contains a value named "name", which contains the name of the new index column. Set 'name' to "OFF" to disable index columns.

Returns 1 for successful and 0 for unsuccessful

Example:  
PUT localhost:9001/databases/myDatabase/tables/myTable/index  
{  
    "name": "OFF"  
}

Response:  
1

### Delete all databases

#### DELETE request to /databases
Does not take a request body.

Returns 1 for successful and 0 for unsuccessful.

Example:  
DELETE localhost:9001/databases

Response:  
1


### Delete all tables in a database

#### DELETE request to /databases/{databaseName}/tables
Does not take a request body.

Returns 1 for successful and 0 for unsuccessful.

Example:  
DELETE localhost:9001/databases/myDatabase/tables

Response:  
1


### Delete all columns in a table

#### DELETE request to /databases/{databaseName}/tables/{tableName}/columns
Does not take a request body.

Returns 1 for successful and 0 for unsuccessful.

Example:  
DELETE localhost:9001/databases/myDatabase/tables/myTable/columns

Response:  
1


### Get all the rows in a column

#### GET request to /databases/{databaseName}/tables/{tableName}/columns/{columnName}/rows
Does not take a request body.

Returns a list of rows.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable/columns/myColumn/rows

Response:  
[  
    "myFirstRow1",  
    "mySecondRow1"  
]


### Copy a column and paste it somewhere else

#### POST request to /databases/{databaseName}/tables/{tableName}/columns/{columnName}/paste
Takes a JSON object which contains a value with the name of "path" and a value that shows where the column to copy to is (see example).  
The path where you send the POST request to is where to copy the column to. This column doesn't have to exist yet.

Returns 1 for successful and 0 for unsuccessful.

Example:  
POST localhost:9001/databases/myDatabase/tables/myOtherTable/columns/myPastedTable/paste  
{  
    "path": "/databases/myDatabase/tables/myTable/columns/myColumn"  
}

Response:  
1


### Copy a table and paste it somewhere else

#### POST request to /databases/{databaseName}/tables/{tableName}/paste
Takes a JSON object which contains an attribute called "path" which points to the table to copy from (see example).  
The path where you send the POST request to is where to copy the table to. This doesn't have to exist yet.

Returns 1 for successful and 0 for unsuccessful.

Example:  
POST localhost:9001/databases/myOtherDatabase/tables/myPastedTable/paste  
{  
    "path": "/databases/myDatabase/tables/myTable"  
}

Response:  
1


### Copy a database and paste it somewhere else

#### POST request to /databases/{databaseName}/paste
Takes a JSON object which contains an attribute called "path" which points to the database to copy from (see example).  
The path where you send the POST request to is where to copy the database to. This will replace the database if it already exists.

Returns 1 for successful and 0 for unsuccessful.

Example:  
POST localhost:9001/databases/myPastedDatabase/paste  
{  
    "path": "/databases/myDatabase"  
}

Response:  
1


### Rename a column

#### PATCH request to /databases/{databaseName}/tables/{tableName}/columns/{columnName}
Takes a JSON object which contains a string called "name" with the value of the new name of the column.

Returns 1 for successful and 0 for unsuccessful.

NOTE: You cannot have the column file open in file explorer during renaming.

Example:  
PATCH localhost:9001/databases/myDatabase/tables/myTable/columns/myColumnWithABadName  
{  
    "name": "myColumnWithABetterName"  
}

Response:
1


### Rename a table

#### PATCH request to /databases/{databaseName}/tables/{tableName}
Takes a JSON object which contains a string called "name" with the value of the new name of the table.

Returns 1 for successful and 0 for unsuccessful.

NOTE: You cannot have the column file open in file explorer during renaming.

Example:  
PATCH localhost:9001/databases/myDatabase/tables/myTableWithABadName  
{  
    "name": "myTableWithABetterName"  
}

Response:  
1


### Rename a database

#### PATCH request to /databases/{databaseName}
Takes a JSON object which contains a string called "name" with the value of the new name of the database.

Returns 1 for successful and 0 for unsuccessful.

NOTE: You cannot have the column file open in file explorer during renaming.

Example:  
PATCH localhost:9001/databases/myDatabaseWithABadName  
{  
    "name": "myDatabaseWithABetterName"  
}

Response:  
1


### Get log data

#### GET request /log
Does not take a request body.

Returns the data from the log file.

Example:  
GET localhost:9001/log

Response:  
Database loaded: myDatabase | 2020-07-30 13:19:59.497  
Table loaded: myTable | 2020-07-30 13:19:59.496  
Set index column of table myTable in database myDatabase to myColumn. | 2020-07-30 13:19:59.494  
Loading column: mySecondColumn.txt | 2020-07-30 13:19:59.486  
Loading column: myColumn.txt | 2020-07-30 13:19:59.483  
Loading table: myTable | 2020-07-30 13:19:59.480  
Added table myTable in database myDatabase. | 2020-07-30 13:19:59.478  
Loading database: myDatabase | 2020-07-30 13:19:59.472  
Added database myDatabase. | 2020-07-30 13:19:59.460  


### Delete log data

#### DELETE request to /log
Does not take a request body.

Returns 1 for successful and 0 for unsuccessful.

Example:  
DELETE localhost:9001/log

Response:  
1


### Exit zmdb

#### GET request to /exit
Does not take a request body.

Doesn't return anything. You can test to see if it worked by sending another request and seeing if you get a response or by looking at the logs.

Example:  
GET localhost:9001/exit


### Get the active port

#### GET request to /port
Does not take a request body.

Returns the port (-1 if not found).

Example:  
GET localhost:9001/port

Response:  
9001


### Change the port
Requires restart to take effect.

#### PUT request to /port
Takes a JSON object with an attribute called "number", which has a value of the desired port number

Returns 1 for successful and 0 for unsuccessful.

Example:  
PUT localhost:9001/port  
{  
    "number": 8080  
}

Response:  
1


### Get row by item in index column

#### GET request to /databases/{databaseName}/tables/{tableName}/rows
Takes a JSON object with an attribute called "value", which contains the value of item you're looking for.

Returns a list with two lists in it. The first is a list of the items from the row that you were trying to get. The second is the order of the columns that the first list provided.
Returns a list with two empty lists in it if the row couldn't be found. Check logs for the reason why.

Example:  
GET localhost:9001/databases/myDatabase/tables/myTable/rows  
{
    "value": "indexRow4"  
}

Response:  
[  
    ["indexRow4", "otherRow4"],  
    ["myIndexColumn", "myOtherColumn"]  
]


## Column types
If a number over- or under-flows, it wraps back to the MIN- or MAX-VALUE, respectively. Capitalization does matter.

"Boolean": a true or false value

"String": a chain of characters, enclosed by double-quotes.

"Integer": an integer number between -2147483648 to 2147483647.

"Double": a decimal value between -1.7976931348623157e+308 and 1.7976931348623157e+308 (a really big number).

"Float": a decimal value between -1 * (2-2-23)·2^127 and (2-2-23)·2^127 (a slightly smaller number).

"Character": a character value, like 'c' or '&'.

"Byte": an integer value between -128 and 127.

"Short": an integer value between -32,768 and 32,767.

"Long": an integer value between -9,223,372,036,854,775,808 and 9,223,372,036,854,775,807.

"UUID": a UUID formatted id (looks like 9e2e1203-5918-4d1e-8efc-d67de9b9a602)

"UUID-auto": auto-generates a unique UUID every time you make a row. You can enter any value in the "data" list for this row and it will be disregarded, but you have to include it.
